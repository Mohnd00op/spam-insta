<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title> Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="logo">
      <div class="logo-icon">
        <i class="fas fa-download"></i>
      </div>
      <div class="logo-text">ØªØ­Ù…ÙŠÙ„ <span>Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</span></div>
    </div>
  </header>

  <div class="container">
    <div class="download-card">
      <div class="card-header">
        <h1>Ø£Ø¯Ø§Ø© ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</h1>
        <p>Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ³Ø±Ø¹Ø©</p>
      </div>

      <div class="input-group">
        <label for="instagram-url">Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</label>
        <div class="url-input-container">
          <div class="url-prefix">
            <i class="fas fa-link"></i>
          </div>
          <input
            type="text"
            id="instagram-url"
            class="url-input"
            placeholder="https://www.instagram.com/p/..."
          />
        </div>
      </div>

      <button class="btn pulse" onclick="processDownload()">
        <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¢Ù†
      </button>

      <div id="result-container" class="result-container"></div>
    </div>

    <div class="instructions">
      <h2>ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø¯Ø§Ø©</h2>
      <div class="steps">
        <div class="step">
          <div class="step-number">1</div>
          <h3>Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</h3>
          <p>Ø§ÙØªØ­ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… ÙˆØ§Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„Ù‡</p>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <h3>Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø·</h3>
          <p>Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ù…Ø®ØµØµ Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰</p>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <h3>Ø§Ø¶ØºØ· ØªØ­Ù…ÙŠÙ„</h3>
          <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„</p>
        </div>
        <div class="step">
          <div class="step-number">4</div>
          <h3>Ø§Ø­ÙØ¸ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</h3>
          <p>Ø¨Ø¹Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ØŒ Ø§Ø­ÙØ¸ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</p>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <p>Ø£Ø³Ø±Ø¹ ÙˆØ£Ø³Ù‡Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø¨Ø±Ø§Ù…Ø¬</p>

      <div class="features">
        <div class="feature">
          <i class="fas fa-bolt"></i>
          <span>Ø³Ø±ÙŠØ¹ ÙˆØ³Ù‡Ù„</span>
        </div>
        <div class="feature">
          <i class="fas fa-shield-alt"></i>
          <span>Ø¢Ù…Ù† ØªÙ…Ø§Ù…Ù‹Ø§</span>
        </div>
        <div class="feature">
          <i class="fas fa-thumbs-up"></i>
          <span>Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„</span>
        </div>
      </div>

      <div class="copyright">
        &copy; 2023 Ø£Ø¯Ø§Ø© ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
      </div>
    </div>
  </footer>

  <script>
    async function processDownload() {
      const urlInput = document.getElementById("instagram-url");
      const resultContainer = document.getElementById("result-container");

      resultContainer.className = "result-container";
      resultContainer.style.display = "block";

      if (!urlInput.value) {
        resultContainer.className = "result-container error";
        resultContainer.innerHTML = "ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Ø£ÙˆÙ„Ø§Ù‹";
        return;
      }

      if (!urlInput.value.includes("instagram.com")) {
        resultContainer.className = "result-container error";
        resultContainer.innerHTML =
          "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… ØµØ­ÙŠØ­ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ https://www.instagram.com";
        return;
      }

      resultContainer.innerHTML =
        'Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ... <i class="fas fa-spinner fa-spin"></i>';

      try {
        // Ù‡Ù†Ø§ ÙŠØ¬Ø¨ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
        const response = await fetch("/download", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ url: urlInput.value }),
        });

        const data = await response.json();

        if (response.ok) {
          if (data.results && data.results.length > 0) {
            let html = "";
            data.results.forEach((item, index) => {
              html += `
                <div style="margin-bottom: 20px; border-bottom: 1px solid #444; padding-bottom: 15px;">
                  <img src="${item.imgSrc}" alt="ØµÙˆØ±Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" style="max-width: 100%; border-radius: 10px; margin-bottom: 10px;" />
                  <p><strong>Ø§Ù„Ù…Ù„Ù Ø±Ù‚Ù… ${index + 1}</strong></p>
                  <p>ğŸ‘¤ Ø¨ÙˆØ§Ø³Ø·Ø©: ${item.profileName}</p>
                  <p>â¤ï¸ Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª: ${item.likes} | ğŸ’¬ ØªØ¹Ù„ÙŠÙ‚Ø§Øª: ${item.comments}</p>
                  <p>Ø§Ù„ÙˆØµÙ: ${item.description}</p>
                  <a href="${item.downloadLink}" target="_blank" style="color:#22c55e; text-decoration: underline; font-weight: bold;">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a>
                </div>
              `;
            });
            resultContainer.className = "result-container success";
            resultContainer.innerHTML = html;
          } else {
            resultContainer.className = "result-container error";
            resultContainer.innerHTML = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ­Ù…ÙŠÙ„.";
          }
        } else {
          resultContainer.className = "result-container error";
          resultContainer.innerHTML = data.error || "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        }
      } catch (error) {
        resultContainer.className = "result-container error";
        resultContainer.innerHTML =
          "ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù….";
      }
    }

    // Ø¯Ø¹Ù… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    document
      .getElementById("instagram-url")
      .addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          processDownload();
        }
      });
  </script>
</body>
</html>
